<div xp-panel ng-init="app.selectedPage='prepaidcardaddcard'">
    <xp-post api="JustMoney/Api/PrepaidCard/RegisterCard">
        <form name="form" role="form" ng-submit="accept()">
			<xp-list api="/JustMoney/Api/PrepaidCard/Cards"
					 initial-search
					 xp-success="scope.arguments.cards = data.data;
                                 scope.arguments.cardId = scope.arguments.cards[0].id.toString();
                                 scope.maxCards = (4-data.data.length);
                                 scope.arguments.cardsToAdd = 1">
				<!-- Modificar alias de las tarjetas -->
				<div class="spinner" ng-show="_windowState.isBusy">
					<div class="double-bounce1"></div>
					<div class="double-bounce2"></div>
				</div>
				<!-- Errors -->
				<div class="alert alert-danger" role="alert" ng-show="errors.length">
					<ul>
						<li ng-repeat="error in errors">{{error}}</li>
					</ul>
				</div>
				<h1>Registrar tarjeta autorizada</h1>
				<div class="col-md-12" ng-if="maxCards<=0">
					<div class="verticalSpacer"></div>
					<div class="form-group row">
						<div class="col-md-10">
							<p>
								Ya ha alcanzado el límite de tarjetas. No es posible solicitar más de 4 tarjetas.
							</p>
						</div>
					</div>
				</div>

				<div class="col-md-12" ng-if="maxCards>0">
					<div>
						<div class="form-group row">
							<div class="erticalSpacer"></div>

							<div class="col-md-12">
								<h4>Tarjeta autorizada</h4>
							</div>
							<div class="col-md-10">
								<div class="row">
									<div class="col-md-2">Alias</div>
									<div class="col-md-10">
										<input type="text" class="form-control" name="alias" ng-model="arguments.alias" ng-disabled="_windowState.isBusy">
									</div>
								</div>
							</div>
							<div class="col-md-2"><small>* Mínimo 4 y máximo 6 caracteres</small></div>

							<div class="col-md-10">
								<div class="row">
									<div class="col-md-2">Número</div>
									<div class="col-md-10">
										<input type="text" class="form-control" name="cardHolderId" ng-model="arguments.cardHolderId" ng-disabled="_windowState.isBusy">
									</div>
								</div>
							</div>
							@*<div class="col-md-2"><small>&nbsp;</small></div>

							<div class="col-md-12">
								<h4>Dirección de envío</h4>
							</div>
							<div class="col-md-10">
								<div class="row">
									<div class="col-md-12">
										<label for="address1" class="col-form-label">Dirección</label><br />
										<input type="text" class="form-control" name="address1" ng-model="arguments.address1" ng-disabled="_windowState.isBusy">
									</div>
								</div>
								<div class="row">
									<div class="col-md-12">
										<label for="address2" class="col-form-label">Complemento de dirección</label><br />
										<input type="text" class="form-control" name="address2" ng-model="arguments.address2" ng-disabled="_windowState.isBusy">
									</div>
								</div>
								<div class="row">
									<div class="col-md-12">
										<label for="city" class="col-form-label">Población</label><br />
										<input type="text" class="form-control" name="city" ng-model="arguments.city" ng-disabled="_windowState.isBusy">
									</div>
								</div>
								<div class="row">
									<div class="col-md-12">
										<label for="province" class="col-form-label">Provincia</label><br />
										<input type="text" class="form-control" name="province" ng-model="arguments.province" ng-disabled="_windowState.isBusy">
									</div>
								</div>
								<div class="row">
									<div class="col-md-12">
										<label for="zipCode" class="col-form-label">Código Postal</label><br />
										<input type="text" class="form-control" name="zipCode" ng-model="arguments.zipCode" ng-disabled="_windowState.isBusy">
									</div>
								</div>
								<div class="row">
									<div class="col-md-12">
										<label for="country" class="col-form-label">País</label><br />
										<select class="form-control" name="country" ng-model="arguments.country" required ng-disabled="_windowState.isBusy">
											<option value="25">España</option>
										</select>
									</div>
								</div>
							</div>
							<div class="col-md-2">&nbsp;</div>*@

							<div class="verticalSpacer"><br /></div>

							<div class="col-sm-10">
								<div class="orangeSingleButtonsDiv">
									<button type="submit" class="orangeButton" ng-disabled="_windowState.isBusy">Registrar</button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</xp-list>
        </form>
    </xp-post>
</div>