<div xp-panel ng-init="app.selectedPage='prepaidcardloadfunds'">
	<xp-list api="/JustMoney/Api/PrepaidCard" initial-search xp-success='scope.arguments.amount=0.00;'>
		<xp-post api="JustMoney/Api/PrepaidCard/RechargeCard" xp-success="window.location.href = data.redirectUrl;">
			<form name="form" role="form" ng-submit="accept()">
				<!-- Spinner -->
				<div class="spinner" ng-show="_windowState.isBusy">
					<div class="double-bounce1"></div>
					<div class="double-bounce2"></div>
				</div>
				<h1>Recargar con tarjeta de débito o crédito</h1>
				<!-- Errors -->
				<div class="alert alert-danger" role="alert" ng-show="errors.length" ng-cloak>
					<ul>
						<li ng-repeat="error in errors">{{error}}</li>
					</ul>
				</div>

				<div>
					<div class="form-group row">
						<label for="amount" class="col-sm-4 col-form-label">Cantidad</label>
						<div class="input-group col-sm-8">
							<input type="number" class="form-control" id="amount" name="amount" ng-model="arguments.amount" required min="0" pattern="^\d*(\.\d{0,2})?$" ng-disabled="_windowState.isBusy">
							<div class="input-group-append">
								<span class="input-group-text">€</span>
							</div>
						</div>
					</div>
					<div class="form-group row">
						<label for="cardId" class="col-sm-4 col-form-label">¿Qué tarjeta quieres recargar?</label>
						<div class="input-group col-sm-8">
							<select class="form-control" id="cardId" name="cardId" ng-model="id" required ng-disabled="_windowState.isBusy">
								<option ng-repeat="card in data" value="{{card.id}}">{{card.alias}}</option>
							</select>
						</div>
					</div>
					<div class="form-group row">
						<label for="password" class="col-sm-4 col-form-label">Contraseña</label>
						<div class="col-sm-8">
							<input type="password" class="form-control" name="password" ng-model="arguments.password" required ng-disabled="_windowState.isBusy">
						</div>
					</div>
				</div>
				<!-- Buttons -->
				<div class="orangeSingleButtonsDiv">
					<button type="submit" class="orangeButton" ng-disabled="_windowState.isBusy || form.$invalid">Recargar</button>
				</div>
			</form>
		</xp-post>
	</xp-list>
</div>
