<ion-view cache-view="false" view-title="Crear ticket" xp-panel xp-loading>
    <ion-content  class="background mainContent">
        <div style="margin-top: 20%;">
            <div class="row">
                <div class="col col-100" style="background-color: rgba(255,255,255,0.15); border-radius: 10%;">
                    <div class="col col-5"></div>
                    <div class="col col-90" ng-controller="ticketCreateController">
                        <form name="form" id="form" role="form" ng-submit="create(arguments.amount, arguments.title, arguments.reference)">
                            <div class="row">
                                <div class="col col-60" style="padding: 0px;">
                                    <div class="row" style="padding: 0px;">
                                        <div class="col col-80" style="padding: 0px;">
                                            <label form="form" style="padding: 0px;" ng-class="{'has-error':form.amount.$invalid}">
                                                <div class="marginNone" style="height: 6em;" id="importIluminate">
                                                    <input id="inputImporte"
                                                           style="width: 100%; height: 6em; border-radius: 8px 8px 8px 8px; background-color: rgba(255,255,255,0); border: 1px solid white;"
                                                           type="text"                                           
                                                           min="0"
                                                           max="9999"
                                                           ng-maxlength="6"
                                                           ng-minlength="0"
                                                           name="amount"
                                                           ng-model="arguments.amount" 
                                                           required
                                                           ng-focus="focusStyles()"
                                                           ng-blur="blurStyles()"
                                                           autofocus
                                                           ng-pattern="/^[0-9]{1,4}(\.[0-9]{1,2})?$/"
                                                           xp-decimal-input
                                                           readonly>
                                                </div>
                                            </label>   
                                        </div>
                                        <div class="col col-20">
                                            <div class="center">
                                                <div style="font-size: 3em;">â‚¬</div>    
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <div class="col col-40"  style="padding: 0px;">
                                    <div class="row"  style="padding: 0px;">
                                        <div class="col col-100"  style="padding: 0px;">
                                            <button  style="border-radius: 8px 8px 8px 8px; 
                                                            width: 100%; background-color: rgba(255,255,255,0); 
                                                            border: 1px solid white; 
                                                            height: 3em; 
                                                            color: white; 
                                                            font-size: 2em; 
                                                            padding: 0px;">Crear</button>       
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row" ng-show="no">
                                <div class="col col-100">
                                    <label form="form" >
                                        <span class="input-label">Fecha</span><br>
                                        <span name="date">{{arguments.date|xpDateTime}}</span>
                                    </label>  
                                </div>
                            </div>
                            <hr style="background-color: white; margin-top: 5%;">
                            <xp-list 
                                     api="Mobile/PaymentConcession/v1" 
                                     xp-init="scope.argumentSelect.concessionId = {items:[]}; scope.arguments.date = moment(Date()).format('YYYY-MM-DD HH:mm:ss');"
                                     xp-target="argumentSelect.concessionId.items"
                                     initial-search
                                     xp-success="
                                                 (scope.argumentSelect.concessionId.items.length == 1) && 
                                                 (scope.arguments.concessionId = scope.argumentSelect.concessionId.items[0].id)
                                                 ">
                                <div class="row">
                                    <div class="col col-100">
                                        <label form="form">
                                            <div class="row">
                                                <div class="col col-35">
                                                    <div style=" font-size: 1.2em;">Empresa</div>
                                                </div>
                                                <div class="col col-65">
                                                    <select style="background-color: rgba(255,255,255,0); color: white; border: 0px; font-size: 1.2em;"
                                                            name="concessionId"
                                                            ng-model="arguments.concessionId" 
                                                            ng-options="item.id as item.name for item in argumentSelect.concessionId.items"
                                                            ng-disabled="argumentSelect.concessionId.items.length==1"
                                                            required>
                                                        <option value="">--Selecciona Empresa--</option> 
                                                    </select> 
                                                </div>
                                            </div>
                                        </label>
                                    </div>
                                </div>

                            </xp-list>
                            <div class="row">
                                <div class="col col-100">
                                    <label form="form">
                                        <div class="row">
                                            <div class="col col-35"  style=" font-size: 1.2em;">
                                                Concepto
                                            </div>
                                            <div class="col col-65">
                                                <input type="text" name="title" ng-model="arguments.title" style="background-color: rgba(255,255,255,0); color: white; border: 0px; border-bottom: 1px solid white;">
                                            </div>
                                        </div>
                                    </label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col col-100">
                                    <label form="form">
                                        <div class="row">
                                            <div class="col col-35"  style=" font-size: 1.2em;">
                                                Referencia
                                            </div>
                                            <div class="col col-65">
                                                <input type="text" name="reference" ng-model="arguments.reference" style="background-color: rgba(255,255,255,0); color: white; border: 0px; border-bottom: 1px solid white;">
                                            </div>
                                        </div>
                                    </label>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="col col-5"></div>
                </div>
            </div>
        </div>
    </ion-content>
    <xp-decimal-keyboard></xp-decimal-keyboard>
</ion-view>
