<ion-view cache-view="false" view-title="Pay[in] PIN" xp-panel>
  <ion-content ng-controller="LoadingCtrl">
    <xp-update-pin id="updatepin" data-api="Mobile/User/v1/Pin" data-cache>
      <form name="form" role="form" class="form" ng-submit="updatePin()">
        <div class="list">
          <label form="form" class="item item-input item-stacked-label" ng-class="{'has-error':form.oldPin.$invalid}">
            <span class="input-label">Pay[in] PIN anterior</span>
            <input type="password" name="oldPin" ng-model="arguments.oldPin" required ng-pattern="/^\d{4}$/" autofocus>
          </label>
          <ng-messages for="form.oldPin.$error" role="alert">
            <ng-message when="required">Este campo es requerido.</ng-message>
            <ng-message when="pattern">Este campo debe ser de 4 dígitos.</ng-message>
          </ng-messages>
          <label form="form" class="item item-input item-stacked-label" ng-class="{'has-error':form.pin.$invalid}">
            <span class="input-label">Nuevo Pay[in] PIN</span>
            <input type="password" name="pin" ng-model="arguments.pin" required ng-pattern="/^\d{4}$/">
          </label>
          <ng-messages for="form.pin.$error" role="alert">
            <ng-message when="required">Este campo es requerido.</ng-message>
            <ng-message when="pattern">Este campo debe ser de 4 dígitos.</ng-message>
          </ng-messages>
          <label form="form" class="item item-input item-stacked-label" ng-class="{'has-error':form.confirmPin.$invalid}">
            <span class="input-label">Confirmar Pay[in] PIN</span>
            <input type="password" name="confirmPin" ng-model="arguments.confirmPin" required ng-pattern="/^\d{4}$/">
          </label>
          <ng-messages for="form.confirmPin.$error" role="alert">
            <ng-message when="required">Este campo es requerido.</ng-message>
            <ng-message when="pattern">Este campo debe ser de 4 dígitos.</ng-message>
          </ng-messages>          
        </div>
        <div class="button-bar padding">
          <button type="submit" class="button button-payin" ng-disabled="!form.$valid">Actualizar</button>
        </div>
      </form>    
    </xp-update-pin>
  </ion-content>
</ion-view>