<ion-view cache-view="false" view-title="Cambiar Contraseña" xp-panel>
  <ion-content ng-controller="LoadingCtrl">
    <xp-update-password id="updatepassword" data-api="/Api/Account/UpdatePassword" ng-controller="passwordUpdateController" data-cache>             
      <form name="form" role="form" id="form" ng-submit="updatePassword()">
        <div class="list">
          <label form="form" class="item item-input item-stacked-label" ng-class="{'has-error':form.oldPassword.$invalid}">
            <span class="input-label">Contraseña anterior</span>
            <input type="password" name="oldPassword" ng-model="arguments.oldPassword" required ng-minlength="6" autofocus>
          </label>
          <ng-messages for="form.oldPassword.$error" role="alert">
            <ng-message when="required">Este campo es requerido.</ng-message>
            <ng-message when="minlength">Este campo debe tener al menos 6 caracteres.</ng-message>
          </ng-messages>
          <label form="form" class="item item-input item-stacked-label" ng-class="{'has-error':form.password.$invalid}">
            <span class="input-label">Nueva contraseña</span>
            <input type="password" name="password" ng-model="arguments.password" required ng-minlength="6">
          </label>
          <ng-messages for="form.password.$error" role="alert">
            <ng-message when="required">Este campo es requerido.</ng-message>
            <ng-message when="minlength">Este campo debe tener al menos 6 caracteres.</ng-message>
          </ng-messages>          
          <label form="form" class="item item-input item-stacked-label" ng-class="{'has-error':form.confirmPassword.$invalid}">
            <span class="input-label">Confirmación contraseña</span>
            <input type="password" name="confirmPassword" ng-model="arguments.confirmPassword" required ng-minlength="6">
          </label>
          <ng-messages for="form.confirmPassword.$error" role="alert">
            <ng-message when="required">Este campo es requerido.</ng-message>
            <ng-message when="minlength">Este campo debe tener al menos 6 caracteres.</ng-message>
          </ng-messages>
        </div>
        <div class="button-bar padding">
          <button type="submit" class="button button-payin" ng-click="confirm()" ng-disabled="!form.$valid">Actualizar</button>
        </div>   
      </form>    
    </xp-update-password>
  </ion-content>
</ion-view>