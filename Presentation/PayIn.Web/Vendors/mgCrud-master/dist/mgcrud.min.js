"use strict";!function(a,b){magicCrudAngular=a.magicCrudAngular||(a.magicCrudAngular={}),b&&(magicCrudAngular.isEmpty=b.isEmpty||function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},magicCrudAngular.version={full:"1.0.0",major:1,minor:0,dot:0,codeName:"magic-crud-angular"},function(){var a;try{b.module("ngRoute")}catch(c){return a=b.module("mgCrud",[]),void a.constant("$routeParams",{})}a=b.module("mgCrud",["ngRoute"])}())}(window,window.angular),function(a,b){function c(a,c,d,e,f){function g(){var b;return t.as?(b=a[t.as])?b:a[t.as]={}:a}function h(){t.partialModel=c.partialmodel}function i(){u.model=t.isArray?[]:{}}function j(){u.mgEval=w(a,a.$eval)}function k(){t.self=u}function l(){if(t.regexPath){var a=t.regexPath.regexp.exec(c.path);a&&(t.path=c.path)}}function m(a,b){u[a]=function(){t.ajaxCmd===a&&l(),b.call(u,t,arguments)}}function n(){v(t.cmd,function(a,b){x(a)&&m(b,a)})}function o(){var b=t.init&&f(t.init)(a);t.init&&u.mgEval(b)}function p(){t.cacheKey}function q(){y(e)||(u.params=e)}function r(a){t.regexPath?c.$observe("path",function(b){var c=t.regexPath.regexp.exec(b);c&&(t.path=b,a())}):a()}function s(){var a=t.cmd&&t.cmd[t.auto]?u[t.auto]:b;x(a)&&r(a)}var t=d(c.options,c.override,c.path,c.transform),u=g(),v=angular.forEach,w=angular.bind,x=angular.isFunction,y=magicCrudAngular.isEmpty;k(),i(),h(),j(),n(),o(),q(),p(),s()}function d(){return{restrict:"EA",scope:!0,dynamicScope:function(a){var b=a.scope;return b?"true"===b.toLowerCase()?!0:!1:!0},controller:c}}c.$inject=["$scope","$attrs","mgResolveFactory","$routeParams","$interpolate"],a.directive("mgAjax",d)}(angular.module("mgCrud")),function(a){function b(a){var b=a("mgCache");return{get:b.get,put:b.put,remove:b.remove,removeAll:b.removeAll,pop:function(a){var b=this.get(a);return b&&this.remove(a),b}}}b.$inject=["$cacheFactory"],a.factory("mgCacheFactory",b)}(angular.module("mgCrud")),function(a){function b(a,b,c,d){return{hide:b.hide,status:c.setStatus,assignModel:d.assignModel,back:a.back}}function c(a,b){return{accept:a.accept,close:b.back}}b.$inject=["mgHistoryFactory","mgSpinnerFactory","mgStatusFactory","mgCreateModelFactory"],c.$inject=["mgAcceptFactory","mgHistoryFactory"],a.factory("mgSuccessFactoryCreate",b),a.factory("mgCommandCreate",c),a.factory("mgCreate",function(){return{as:"create",method:"post",service:"mgHttp",cacheService:"mgCacheFactory",cache:'["model"]',before:"mgBeforeHttpFactory",success:"mgSuccessFactoryCreate",error:"mgErrorHttpFactory",cmd:"mgCommandCreate",ajaxCmd:"accept"}})}(angular.module("mgCrud")),function(a){function b(a,b){return{hide:b.hide,back:function(){a.history.back()}}}b.$inject=["$window","mgSpinnerFactory"],a.factory("mgSucessFactoryDelete",b),a.factory("mgDelete",function(){return{as:"delete",method:"delete",service:"mgHttp",before:"mgBeforeHttpFactory",success:"mgSucessFactoryDelete",error:"mgErrorHttpFactory",cmd:"mgCommandCreate",ajaxCmd:"accept"}})}(angular.module("mgCrud")),function(a){function b(a,b,c){return{hide:a.hide,status:b.setStatus,assingModel:c.assingModel}}b.$inject=["mgSpinnerFactory","mgStatusFactory","mgCreateModelFactory"],a.factory("mgSuccessFactoryEdit",b),a.factory("mgEdit",function(){return{as:"edit",method:"get",service:"mgHttp",cacheService:"mgCacheFactory",cache:'["model"]',before:"mgBeforeHttpFactory",success:"mgSuccessFactoryIndex",error:"mgErrorHttpFactory",cmd:"mgAcceptFactory",auto:"accept"}})}(angular.module("mgCrud")),function(a){function b(a){return{back:function(){a.history.back()}}}function c(){function a(){this.show=!1}function b(){this.show=!0}return{hide:a,show:b}}function d(){function a(a){this.status=a.status}return{setStatus:a}}function e(){function a(a){angular.isArray(a.data)&&angular.isArray(this.model)?this.model=a.data:angular.extend(this.model,a.data||{})}return{assignModel:a}}function f(){function a(a){var b=a.partialModel&&this.mgEval(a.partialModel)||this.filter||this.model||{};a.service(a.path,b,a.self)}return{accept:a}}function g(a){return{show:a.show}}function h(a,b){return{hide:a.hide,setStatus:b.setStatus,setError:function(a){this.errorText=a.data}}}function i(){return function(a,b){var c=angular.isArray,d=angular.forEach,e=[];return a&&b?c(a)?(d(a,function(a){e.push(this.mgEval(b,a))},this),e):this.mgEval(b,a):a}}b.$inject=["$window"],c.$inject=[],d.$inject=[],e.$inject=[],f.$inject=[],g.$inject=["mgSpinnerFactory"],h.$inject=["mgSpinnerFactory","mgStatusFactory"],a.factory("mgSpinnerFactory",c),a.factory("mgStatusFactory",d),a.factory("mgCreateModelFactory",e),a.factory("mgAcceptFactory",f),a.factory("mgBeforeHttpFactory",g),a.factory("mgErrorHttpFactory",h),a.factory("mgHistoryFactory",b),a.factory("mgDefaultTransform",i),a.constant("accept","accept")}(angular.module("mgCrud")),function(a){function b(a,b,c){return{hide:a.hide,status:b.setStatus,assignModel:c.assignModel}}function c(a){function b(a){this.filter.page++,this.accept(a)}function c(a){0!==this.filter.page&&(this.filter.page--,this.accept(a))}return{accept:a.accept,nextPage:b,previousPage:c}}b.$inject=["mgSpinnerFactory","mgStatusFactory","mgCreateModelFactory"],c.$inject=["mgAcceptFactory"],a.factory("mgSuccessFactoryIndex",b),a.factory("mgCommandIndex",c),a.factory("mgIndex",function(){return{as:"index",init:"index.filter={page:0,records:20}",isArray:!0,method:"query",service:"mgHttp",cacheService:"mgCacheFactory",cache:'["filter"]',before:"mgBeforeHttpFactory",success:"mgSuccessFactoryIndex",error:"mgErrorHttpFactory",cmd:"mgCommandIndex",auto:"accept"}})}(angular.module("mgCrud")),function(a){a.factory("mgPut",function(){return{as:"patch",init:"patch.model=edit.model",method:"patch",service:"mgHttp",before:"mgBeforeHttpFactory",success:"mgSuccessFactoryCreate",error:"mgErrorHttpFactory",cmd:"mgCommandCreate",ajaxCmd:"accept"}})}(angular.module("mgCrud")),function(a){a.factory("mgPut",function(){return{as:"put",init:"put.model=edit.model",method:"put",service:"mgHttp",before:"mgBeforeHttpFactory",success:"mgSuccessFactoryCreate",error:"mgErrorHttpFactory",cmd:"mgCommandCreate",ajaxCmd:"accept"}})}(angular.module("mgCrud")),function(a,b){function c(a,c,d,e){function f(f,g,h){var i=angular.forEach,j=angular.extend,k={},l="mgDefaultTransform";return i(["config","before","success","error","cmd","auto","service","cacheService"],function(c){k[c]=f[c]?a.get(f[c]):b}),i(["method","as","auto","ajaxCmd","init","isArray"],function(a){f.hasOwnProperty(a)&&(k[a]=f[a])}),h&&(k.transform=a.has(h)?{fn:a.get(h)}:{fn:a.get(l),expression:h}),f.cache&&(k.cache=c(f.cache)(),k.cacheKey=f.cacheKey||e.path()+(f.as||"")),k.service&&k.method&&(k.service=k.service[k.method](k.config,k.before,k.success,k.error,k.transform)),j(k,d.resolve(g))}return function(b,d,e,g){var h=a.has(b)?a.get(b):c(b)()||{},d=c(d)()||{};return f(angular.extend(h,d),e,g)}}c.$inject=["$injector","$parse","mgResolvePathService","$location"],a.factory("mgResolveFactory",c)}(angular.module("mgCrud")),function(a,b){function c(a){function c(c){function d(a){var c=i.getItem(a);return c!==b?JSON.parse(c):b}function e(a,c){a&&c!==b&&i.setItem(a,JSON.stringify(c))}function f(a){i.removeItem(a)}function g(){i.clear()}function h(a){var c=d(a);return c!==b&&f(a),c}{var i=a?c.sessionStorage:c.localStorage;angular.isObject}return{get:d,put:e,remove:f,removeAll:g,pop:h}}return c.$inject=["$window"],c}a.factory("mgSessionStorageFactory",c(!0)),a.factory("mgLocalStorageFactory",c())}(angular.module("mgCrud")),function(a){function b(a){function b(a,b){var c=b.caseInsensitiveMatch,d={originalPath:a,regexp:a},e=d.keys=[];return a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(a,b,c,d){var f="?"===d?d:null,g="*"===d?d:null;return e.push({name:c,optional:!!f}),b=b||"",""+(f?"":b)+"(?:"+(f?b:"")+(g&&"(.+?)"||"([^/]+)")+(f||"")+")"+(f||"")}).replace(/([\/$\*])/g,"\\$1"),d.regexp=new RegExp("^"+a+"$",c?"i":""),d}this.resolve=function(c){return c?c&&-1===c.indexOf("{{")?{path:c}:{path:c,regexPath:b(c.replace(/\{+/g,":").replace(/\}+/g,"").replace(/\./g,""),{caseInsensitiveMatch:!0})}:{path:a.path()}}}b.$inject=["$location"],a.service("mgResolvePathService",b)}(angular.module("mgCrud")),function(a){function b(){function a(a){function c(a,b,c){m(a,function(a){p(a)&&(c?a.call(b,c):a.call(b))})}function d(a){return"query"===a?"get":a}function e(a,b){return"query"===a||"jsonp"===a?{params:b}:{data:b}}function f(a,b){var c=g(a).url;return c?c+b||"":b||""}function g(a){return a||b||{}}function h(a){return g(a).additionalConfig||{}}function i(a,b,c,d,e){return{data:a,status:b,headers:c,config:d,statusText:e}}function j(b,d,e,f,g,h){c(d,h),a(b).success(function(a,b,d,f,j){var k;g&&(k=g.fn.call(h,a,g.expression)),c(e,h,i(k||a,b,d,f,j))}).error(function(a,b,d,e,g){c(f,h,i(a,b,d,e,g))})}function k(){m(arguments,function(a){n[a]=function(b,c,d,e,g){return function(i,k){j(o({method:a,url:f(b,i)},h(b)),c,d,e,g,k)}}})}function l(){m(arguments,function(a){n[a]=function(b,c,g,i,k){return function(l,m,n){j(o(o({method:d(a),url:f(b,l)},e(a,m)),h(b)),c,g,i,k,n)}}})}var m=angular.forEach,n={},o=angular.extend,p=angular.isFunction;return k("get","delete"),l("post","put","query","patch","jsonp"),n}var b;this.setDefaultConfig=function(a){b=a},this.$get=["$http",function(b){return a(b)}]}a.provider("mgHttp",b)}(angular.module("mgCrud"));
//# sourceMappingURL=mgcrud.map